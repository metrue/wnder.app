// Internationalization data
const translations = {
    en: {
        'hero.title': 'Wander with Wonder',
        'hero.subtitle': 'Your trusted travel companion who silently walks beside you, sharing the world\'s most fascinating stories, history, and hidden treasures like only a close friend would.',
        'hero.cta': 'Download for iOS',
        'hero.learn-more': 'Learn More',
        'features.title': 'Your Perfect Travel Companion',
        'features.storytelling.title': 'Stories & Tales',
        'features.storytelling.description': 'Listen to fascinating stories about your surroundings—history, art, culture, and hidden gems that only a close friend would know to share.',
        'features.silent-companion.title': 'Silent Companion',
        'features.silent-companion.description': 'Always by your side, quietly discovering amazing places around you. Like having a well-traveled friend who knows just when to share something wonderful.',
        'features.natural-conversation.title': 'Natural Conversation',
        'features.natural-conversation.description': 'Talk with your travel companion just like you would with a close friend. Ask questions, share curiosities, or simply enjoy the conversation along your journey.',
        'features.shared-memories.title': 'Shared Memories',
        'features.shared-memories.description': 'Create beautiful memories together as you explore. Your companion helps you capture and remember the special moments from every adventure.',
        'how-it-works.title': 'How Wnder Works',
        'how-it-works.step1.title': 'Meet Your Companion',
        'how-it-works.step1.description': 'Open Wnder and let your travel companion quietly join your journey. No setup needed—just start exploring together.',
        'how-it-works.step2.title': 'Discover Together',
        'how-it-works.step2.description': 'Your companion shares fascinating stories about places around you—the kind of insider knowledge only a close friend would know.',
        'how-it-works.step3.title': 'Create Memories',
        'how-it-works.step3.description': 'Chat naturally, ask questions, and build a collection of shared memories from your adventures around the world.',
        'download.title': 'Start Your Journey Today',
        'download.subtitle': 'Available on iOS. Android coming soon.',
        'download.app-store-alt': 'Download on the App Store',
        'download.google-play-alt': 'Coming soon to Google Play',
        'download.android-coming-soon': 'Android Coming Soon',
        'footer.tagline': 'Wander with Wonder',
        'footer.product': 'Product',
        'footer.features': 'Features',
        'footer.download': 'Download',
        'footer.support': 'Support',
        'footer.contact': 'Contact',
        'footer.privacy': 'Privacy Policy',
        'footer.terms': 'Terms of Service',
        'footer.rights': 'All rights reserved.'
    },
    zh: {
        'hero.title': '漫步奇境',
        'hero.subtitle': '您的贴心旅行伙伴，静静地陪伴在您身边，像最亲密的朋友一样分享世界上最迷人的故事、历史和隐藏的珍宝。',
        'hero.cta': '下载iOS版',
        'hero.learn-more': '了解更多',
        'features.title': '您的完美旅行伙伴',
        'features.storytelling.title': '故事与传说',
        'features.storytelling.description': '聆听周围环境的迷人故事——历史、艺术、文化和只有亲密朋友才会知道分享的隐藏瑰宝。',
        'features.silent-companion.title': '静默陪伴',
        'features.silent-companion.description': '始终在您身边，静静地发现周围的奇妙之处。就像有一个见多识广的朋友，总是知道何时分享美好的事物。',
        'features.natural-conversation.title': '自然对话',
        'features.natural-conversation.description': '像与亲密朋友聊天一样与您的旅行伙伴交谈。提出问题，分享好奇心，或简单地享受旅途中的对话。',
        'features.shared-memories.title': '共享回忆',
        'features.shared-memories.description': '在探索过程中一起创造美好的回忆。您的伙伴帮助您捕捉和记住每次冒险中的特殊时刻。',
        'how-it-works.title': 'Wnder如何工作',
        'how-it-works.step1.title': '遇见您的伙伴',
        'how-it-works.step1.description': '打开Wnder，让您的旅行伙伴静静地加入您的旅程。无需设置——只需一起开始探索。',
        'how-it-works.step2.title': '一起发现',
        'how-it-works.step2.description': '您的伙伴分享周围地方的迷人故事——只有亲密朋友才会知道的内幕知识。',
        'how-it-works.step3.title': '创造回忆',
        'how-it-works.step3.description': '自然聊天，提出问题，并建立来自世界各地冒险的共享回忆集合。',
        'download.title': '今天开始您的旅程',
        'download.subtitle': '现已在iOS上推出。Android即将推出。',
        'download.app-store-alt': '在App Store下载',
        'download.google-play-alt': '即将在Google Play推出',
        'download.android-coming-soon': 'Android即将推出',
        'footer.tagline': '漫步奇境',
        'footer.product': '产品',
        'footer.features': '功能',
        'footer.download': '下载',
        'footer.support': '支持',
        'footer.contact': '联系',
        'footer.privacy': '隐私政策',
        'footer.terms': '服务条款',
        'footer.rights': '版权所有。'
    },
    es: {
        'hero.title': 'Vagar con Maravilla',
        'hero.subtitle': 'Tu compañero de viaje de confianza que camina silenciosamente a tu lado, compartiendo las historias más fascinantes del mundo, historia y tesoros ocultos como solo un amigo cercano lo haría.',
        'hero.cta': 'Descargar para iOS',
        'hero.learn-more': 'Saber Más',
        'features.title': 'Tu Compañero de Viaje Perfecto',
        'features.storytelling.title': 'Historias y Cuentos',
        'features.storytelling.description': 'Escucha historias fascinantes sobre tu entorno: historia, arte, cultura y gemas ocultas que solo un amigo cercano sabría compartir.',
        'features.silent-companion.title': 'Compañero Silencioso',
        'features.silent-companion.description': 'Siempre a tu lado, descubriendo silenciosamente lugares increíbles a tu alrededor. Como tener un amigo viajero que sabe justo cuándo compartir algo maravilloso.',
        'features.natural-conversation.title': 'Conversación Natural',
        'features.natural-conversation.description': 'Habla con tu compañero de viaje como lo harías con un amigo cercano. Haz preguntas, comparte curiosidades, o simplemente disfruta la conversación durante tu viaje.',
        'features.shared-memories.title': 'Recuerdos Compartidos',
        'features.shared-memories.description': 'Crea hermosos recuerdos juntos mientras exploras. Tu compañero te ayuda a capturar y recordar los momentos especiales de cada aventura.',
        'how-it-works.title': 'Cómo Funciona Wnder',
        'how-it-works.step1.title': 'Conoce a Tu Compañero',
        'how-it-works.step1.description': 'Abre Wnder y deja que tu compañero de viaje se una silenciosamente a tu viaje. Sin configuración necesaria: solo comienza a explorar juntos.',
        'how-it-works.step2.title': 'Descubrir Juntos',
        'how-it-works.step2.description': 'Tu compañero comparte historias fascinantes sobre lugares a tu alrededor: el tipo de conocimiento interno que solo un amigo cercano conocería.',
        'how-it-works.step3.title': 'Crear Recuerdos',
        'how-it-works.step3.description': 'Chatea naturalmente, haz preguntas, y construye una colección de recuerdos compartidos de tus aventuras alrededor del mundo.',
        'download.title': 'Comienza Tu Viaje Hoy',
        'download.subtitle': 'Disponible en iOS. Android próximamente.',
        'download.app-store-alt': 'Descargar en el App Store',
        'download.google-play-alt': 'Próximamente en Google Play',
        'download.android-coming-soon': 'Android Próximamente',
        'footer.tagline': 'Vagar con Maravilla',
        'footer.product': 'Producto',
        'footer.features': 'Características',
        'footer.download': 'Descargar',
        'footer.support': 'Soporte',
        'footer.contact': 'Contacto',
        'footer.privacy': 'Política de Privacidad',
        'footer.terms': 'Términos de Servicio',
        'footer.rights': 'Todos los derechos reservados.'
    },
    fr: {
        'hero.title': 'Errer avec Émerveillement',
        'hero.subtitle': 'Votre compagnon de voyage de confiance qui marche silencieusement à vos côtés, partageant les histoires les plus fascinantes du monde, l\'histoire et les trésors cachés comme seul un ami proche le ferait.',
        'hero.cta': 'Télécharger pour iOS',
        'hero.learn-more': 'En Savoir Plus',
        'features.title': 'Votre Compagnon de Voyage Parfait',
        'features.storytelling.title': 'Histoires et Contes',
        'features.storytelling.description': 'Écoutez des histoires fascinantes sur votre environnement—histoire, art, culture et joyaux cachés que seul un ami proche saurait partager.',
        'features.silent-companion.title': 'Compagnon Silencieux',
        'features.silent-companion.description': 'Toujours à vos côtés, découvrant silencieusement des endroits merveilleux autour de vous. Comme avoir un ami voyageur qui sait exactement quand partager quelque chose de merveilleux.',
        'features.natural-conversation.title': 'Conversation Naturelle',
        'features.natural-conversation.description': 'Parlez avec votre compagnon de voyage comme vous le feriez avec un ami proche. Posez des questions, partagez vos curiosités, ou profitez simplement de la conversation pendant votre voyage.',
        'features.shared-memories.title': 'Souvenirs Partagés',
        'features.shared-memories.description': 'Créez de beaux souvenirs ensemble en explorant. Votre compagnon vous aide à capturer et à vous souvenir des moments spéciaux de chaque aventure.',
        'how-it-works.title': 'Comment Fonctionne Wnder',
        'how-it-works.step1.title': 'Rencontrez Votre Compagnon',
        'how-it-works.step1.description': 'Ouvrez Wnder et laissez votre compagnon de voyage rejoindre silencieusement votre voyage. Aucune configuration nécessaire—commencez simplement à explorer ensemble.',
        'how-it-works.step2.title': 'Découvrir Ensemble',
        'how-it-works.step2.description': 'Votre compagnon partage des histoires fascinantes sur les endroits autour de vous—le genre de connaissances internes que seul un ami proche connaîtrait.',
        'how-it-works.step3.title': 'Créer des Souvenirs',
        'how-it-works.step3.description': 'Chattez naturellement, posez des questions, et construisez une collection de souvenirs partagés de vos aventures autour du monde.',
        'download.title': 'Commencez Votre Voyage Aujourd\'hui',
        'download.subtitle': 'Disponible sur iOS. Android bientôt disponible.',
        'download.app-store-alt': 'Télécharger sur l\'App Store',
        'download.google-play-alt': 'Bientôt disponible sur Google Play',
        'download.android-coming-soon': 'Android Bientôt Disponible',
        'footer.tagline': 'Errer avec Émerveillement',
        'footer.product': 'Produit',
        'footer.features': 'Caractéristiques',
        'footer.download': 'Télécharger',
        'footer.support': 'Support',
        'footer.contact': 'Contact',
        'footer.privacy': 'Politique de Confidentialité',
        'footer.terms': 'Conditions de Service',
        'footer.rights': 'Tous droits réservés.'
    },
    de: {
        'hero.title': 'Wandeln mit Wundern',
        'hero.subtitle': 'Ihr vertrauensvoller Reisebegleiter, der still neben Ihnen wandelt und die faszinierendsten Geschichten, Geschichte und verborgenen Schätze der Welt teilt, wie es nur ein enger Freund täte.',
        'hero.cta': 'Für iOS Herunterladen',
        'hero.learn-more': 'Mehr Erfahren',
        'features.title': 'Ihr Perfekter Reisebegleiter',
        'features.storytelling.title': 'Geschichten & Erzählungen',
        'features.storytelling.description': 'Hören Sie faszinierende Geschichten über Ihre Umgebung—Geschichte, Kunst, Kultur und verborgene Juwelen, die nur ein enger Freund zu teilen wüsste.',
        'features.silent-companion.title': 'Stiller Begleiter',
        'features.silent-companion.description': 'Immer an Ihrer Seite, still wunderbare Orte um Sie herum entdeckend. Wie einen weitgereisten Freund zu haben, der genau weiß, wann er etwas Wunderbares teilen sollte.',
        'features.natural-conversation.title': 'Natürliche Unterhaltung',
        'features.natural-conversation.description': 'Sprechen Sie mit Ihrem Reisebegleiter genau wie mit einem engen Freund. Stellen Sie Fragen, teilen Sie Neugier, oder genießen Sie einfach die Unterhaltung auf Ihrer Reise.',
        'features.shared-memories.title': 'Geteilte Erinnerungen',
        'features.shared-memories.description': 'Schaffen Sie gemeinsam schöne Erinnerungen beim Erkunden. Ihr Begleiter hilft Ihnen, die besonderen Momente jedes Abenteuers festzuhalten und zu erinnern.',
        'how-it-works.title': 'Wie Wnder Funktioniert',
        'how-it-works.step1.title': 'Treffen Sie Ihren Begleiter',
        'how-it-works.step1.description': 'Öffnen Sie Wnder und lassen Sie Ihren Reisebegleiter still Ihrer Reise beitreten. Keine Einrichtung erforderlich—beginnen Sie einfach gemeinsam zu erkunden.',
        'how-it-works.step2.title': 'Gemeinsam Entdecken',
        'how-it-works.step2.description': 'Ihr Begleiter teilt faszinierende Geschichten über Orte um Sie herum—die Art von Insiderwissen, die nur ein enger Freund kennen würde.',
        'how-it-works.step3.title': 'Erinnerungen Schaffen',
        'how-it-works.step3.description': 'Chatten Sie natürlich, stellen Sie Fragen und bauen Sie eine Sammlung geteilter Erinnerungen von Ihren Abenteuern rund um die Welt auf.',
        'download.title': 'Beginnen Sie Heute Ihre Reise',
        'download.subtitle': 'Verfügbar auf iOS. Android kommt bald.',
        'download.app-store-alt': 'Im App Store Herunterladen',
        'download.google-play-alt': 'Kommt bald zu Google Play',
        'download.android-coming-soon': 'Android Kommt Bald',
        'footer.tagline': 'Wandeln mit Wundern',
        'footer.product': 'Produkt',
        'footer.features': 'Eigenschaften',
        'footer.download': 'Herunterladen',
        'footer.support': 'Support',
        'footer.contact': 'Kontakt',
        'footer.privacy': 'Datenschutzrichtlinie',
        'footer.terms': 'Nutzungsbedingungen',
        'footer.rights': 'Alle Rechte vorbehalten.'
    },
    ja: {
        'hero.title': '驚きと共に歩む',
        'hero.subtitle': '信頼できる旅の仲間として、あなたの隣で静かに歩き、親しい友人だけが知っているような世界で最も魅力的な物語、歴史、隠された宝物を共有します。',
        'hero.cta': 'iOS版をダウンロード',
        'hero.learn-more': '詳細を見る',
        'features.title': 'あなたの完璧な旅の仲間',
        'features.storytelling.title': '物語と伝説',
        'features.storytelling.description': 'あなたの周囲の魅力的な物語を聞いてください—歴史、芸術、文化、そして親しい友人だけが知っている隠された宝石。',
        'features.silent-companion.title': '静かな仲間',
        'features.silent-companion.description': '常にあなたの側にいて、周りの素晴らしい場所を静かに発見してくれます。いつ素晴らしいことを共有すべきかを知っている、よく旅した友人がいるような感じです。',
        'features.natural-conversation.title': '自然な会話',
        'features.natural-conversation.description': '親しい友人と話すように、あなたの旅の仲間と話してください。質問をしたり、好奇心を共有したり、または単に旅の途中で会話を楽しんでください。',
        'features.shared-memories.title': '共有された思い出',
        'features.shared-memories.description': '探索しながら一緒に美しい思い出を作りましょう。あなたの仲間は、すべての冒険から特別な瞬間をキャプチャし、覚えておくのに役立ちます。',
        'how-it-works.title': 'Wnderの仕組み',
        'how-it-works.step1.title': 'あなたの仲間に会う',
        'how-it-works.step1.description': 'Wnderを開いて、あなたの旅の仲間が静かにあなたの旅に参加するようにしましょう。設定は不要—一緒に探索を始めるだけです。',
        'how-it-works.step2.title': '一緒に発見',
        'how-it-works.step2.description': 'あなたの仲間は、あなたの周りの場所について魅力的な物語を共有します—親しい友人だけが知っているような内部情報。',
        'how-it-works.step3.title': '思い出を作る',
        'how-it-works.step3.description': '自然に会話し、質問をし、世界中での冒険から共有された思い出のコレクションを構築してください。',
        'download.title': '今日あなたの旅を始めましょう',
        'download.subtitle': 'iOSで利用可能。Androidは近日公開。',
        'download.app-store-alt': 'App Storeでダウンロード',
        'download.google-play-alt': 'Google Playで近日公開',
        'download.android-coming-soon': 'Android近日公開',
        'footer.tagline': '驚きと共に歩む',
        'footer.product': '製品',
        'footer.features': '機能',
        'footer.download': 'ダウンロード',
        'footer.support': 'サポート',
        'footer.contact': 'お問い合わせ',
        'footer.privacy': 'プライバシーポリシー',
        'footer.terms': '利用規約',
        'footer.rights': '全著作権所有。'
    }
};

// Current language
let currentLanguage = 'en';

// Language switching function
function changeLanguage(lang) {
    currentLanguage = lang;
    updatePageContent();
    
    // Save preference to localStorage
    localStorage.setItem('wnder-language', lang);
}

// Update page content with translations
function updatePageContent() {
    const elements = document.querySelectorAll('[data-i18n]');
    
    elements.forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = translations[currentLanguage][key];
        
        if (translation) {
            element.textContent = translation;
        }
    });
    
    // Update alt attributes
    const altElements = document.querySelectorAll('[data-i18n-alt]');
    altElements.forEach(element => {
        const key = element.getAttribute('data-i18n-alt');
        const translation = translations[currentLanguage][key];
        
        if (translation) {
            element.setAttribute('alt', translation);
        }
    });
}

// Initialize language on page load
function initializeLanguage() {
    // Check for saved language preference
    const savedLanguage = localStorage.getItem('wnder-language');
    
    if (savedLanguage && translations[savedLanguage]) {
        currentLanguage = savedLanguage;
        document.getElementById('language-select').value = savedLanguage;
    } else {
        // Detect browser language
        const browserLang = navigator.language.split('-')[0];
        if (translations[browserLang]) {
            currentLanguage = browserLang;
            document.getElementById('language-select').value = browserLang;
        }
    }
    
    updatePageContent();
}

// Smooth scrolling for navigation links
function initializeSmoothScrolling() {
    const navLinks = document.querySelectorAll('a[href^="#"]');
    
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            
            if (targetElement) {
                const headerHeight = document.querySelector('.header').offsetHeight;
                const targetPosition = targetElement.offsetTop - headerHeight;
                
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });
}

// Header scroll effect
function initializeHeaderEffect() {
    const header = document.querySelector('.header');
    let lastScrollTop = 0;
    
    window.addEventListener('scroll', () => {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        
        if (scrollTop > lastScrollTop && scrollTop > 100) {
            // Scrolling down
            header.style.transform = 'translateY(-100%)';
        } else {
            // Scrolling up
            header.style.transform = 'translateY(0)';
        }
        
        lastScrollTop = scrollTop;
    });
}

// Intersection Observer for animations
function initializeAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observe elements for animation
    const animatedElements = document.querySelectorAll('.feature-card, .step, .download-content');
    animatedElements.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
        observer.observe(el);
    });
}

// Form handling (if needed for future contact forms)
function initializeFormHandling() {
    // Placeholder for future form implementations
    console.log('Form handling initialized');
}

// Analytics tracking (placeholder)
function trackEvent(eventName, properties = {}) {
    // Placeholder for analytics tracking
    console.log('Event tracked:', eventName, properties);
    
    // Example: Google Analytics 4
    // gtag('event', eventName, properties);
    
    // Example: Custom analytics
    // analytics.track(eventName, properties);
}

// Track download clicks
function initializeDownloadTracking() {
    const downloadButtons = document.querySelectorAll('.download-btn, .btn-primary');
    
    downloadButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            trackEvent('download_click', {
                button_text: button.textContent.trim(),
                language: currentLanguage,
                page_url: window.location.href
            });
        });
    });
}

// Performance monitoring
function initializePerformanceMonitoring() {
    // Monitor page load performance
    window.addEventListener('load', () => {
        if ('performance' in window) {
            const perfData = performance.getEntriesByType('navigation')[0];
            
            trackEvent('page_performance', {
                load_time: Math.round(perfData.loadEventEnd - perfData.fetchStart),
                dom_content_loaded: Math.round(perfData.domContentLoadedEventEnd - perfData.fetchStart),
                language: currentLanguage
            });
        }
    });
}

// Service Worker registration for PWA features (future enhancement)
function registerServiceWorker() {
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js')
            .then(registration => {
                console.log('SW registered: ', registration);
            })
            .catch(registrationError => {
                console.log('SW registration failed: ', registrationError);
            });
    }
}

// Initialize everything when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    initializeLanguage();
    initializeSmoothScrolling();
    initializeHeaderEffect();
    initializeAnimations();
    initializeFormHandling();
    initializeDownloadTracking();
    initializePerformanceMonitoring();
    
    // Register service worker for PWA features (commented out for now)
    // registerServiceWorker();
    
    console.log('Wnder website initialized successfully');
});

// Export functions for testing (if needed)
if (typeof module !== 'undefined' && module.exports) {
    module.exports = {
        changeLanguage,
        updatePageContent,
        trackEvent
    };
}